import{d as te,u as le,r as g,c as k,l as ae,k as oe,b as d,e,t as a,f as o,h as v,w as R,v as U,F as M,i as j,j as ne,g as N,n as $,p as re,o as u,_ as ie}from"./index-C4d0zKoG.js";import{T as de}from"./ToggleSwitch-Cjk9m-8X.js";const ue={class:"main-content flex-grow-1"},ce={class:"page-header-row"},pe={class:"page-header-left"},ve={class:"page-title"},ge={class:"page-description"},be={class:"breadcrumb-custom"},me={"aria-label":"breadcrumb"},xe={class:"breadcrumb mb-0"},he={class:"breadcrumb-item"},_e={href:"#"},fe={class:"breadcrumb-item"},ye={href:"#"},Te={class:"breadcrumb-item active","aria-current":"page"},we={class:"row"},ke={class:"col-lg-5 col-md-12 mb-3"},Ce={class:"card tool-card"},Ve={class:"card-header"},Pe={class:"card-body p-3"},Re=["placeholder"],Me={class:"col-lg-7 col-md-12 mb-3"},je={class:"card tool-card"},Se={class:"card-header"},Ue={class:"card-body p-3"},Ne={class:"config-label"},$e=["placeholder"],De={class:"config-label border-top pt-3"},Oe={class:"field-rules"},Ee=["onUpdate:modelValue","placeholder"],Fe=["onUpdate:modelValue","placeholder"],Je=["onClick"],Be={class:"field-actions border-bottom pb-3"},Ie=["disabled"],Le={class:"match-controls"},ze={key:0,class:"realtime-note"},Ae={class:"card tool-card"},Ge={key:0,class:"results-card-header"},He={class:"results-header-left"},qe={class:"results-stats"},Ke={class:"stat-badge status-badge"},Qe={class:"stat-badge-label"},We={class:"stat-badge time-badge"},Xe={class:"stat-badge-label"},Ye={class:"stat-badge-value"},Ze={class:"stat-badge count-badge"},es={class:"stat-badge-label"},ss={class:"stat-badge-value"},ts={key:1,class:"card-header"},ls={class:"card-body p-3"},as={key:0},os={class:"results-table-container"},ns={class:"results-table"},rs={class:"pagination-container"},is={class:"pagination-buttons"},ds=["disabled"],us=["onClick"],cs=["disabled"],ps={class:"d-flex align-items-center gap-2"},vs={value:10},gs={value:20},bs={value:50},ms={value:100},xs={class:"pagination-info"},hs={key:1,class:"empty-state"},_s={class:"text-muted"},fs={class:"card tool-card no-footer"},ys={class:"card-header"},Ts={class:"card-body"},ws={class:"export-section"},ks={class:"export-group"},Cs=["disabled"],Vs=["disabled"],Ps=["disabled"],Rs={class:"export-group"},Ms=["disabled"],js=["disabled"],Ss=["disabled"],Us={key:0,class:"preview-container"},Ns={class:"preview-header"},$s={class:"preview-title"},Ds=["value"],Os={class:"card tool-card no-footer"},Es={class:"card-header"},Fs={class:"card-body"},Js={class:"notice-box"},Bs=te({__name:"RegexTesterView",setup(Is){const{t}=le(),x=g(""),C=g(""),b=g([{name:"name",regex:"(\\S+)"},{name:"age",regex:"(\\d+)"}]),w=g([]),y=g(!0),S=g(!1),c=g([]),D=g(0),h=g(0),p=g(1),_=g(10),m=g(null),J=k(()=>h.value===0?{text:t("pages.regexTester.status.noMatch"),class:"warning"}:{text:t("pages.regexTester.status.complete"),class:"success"}),A=k(()=>w.value.length>0),O=k(()=>Math.ceil(h.value/_.value)),G=k(()=>{const n=(p.value-1)*_.value,s=n+_.value;return c.value.slice(n,s)}),H=k(()=>{const n=[];let l=Math.max(1,p.value-Math.floor(2.5)),r=Math.min(O.value,l+5-1);r-l<4&&(l=Math.max(1,r-5+1));for(let i=l;i<=r;i++)n.push(i);return n}),q=k(()=>m.value==="json"?JSON.stringify(c.value,null,2):m.value==="csv"?E():"");ae(y,n=>{n&&x.value&&P()});const B=()=>{w.value.push({fieldRules:JSON.parse(JSON.stringify(b.value))}),w.value.length>10&&w.value.shift()},K=()=>{B(),b.value.push({name:"",regex:""})},Q=n=>{b.value.length>1?(B(),b.value.splice(n,1),V()):alert(t("pages.regexTester.alerts.minOneField"))},W=()=>{if(w.value.length>0){const n=w.value.pop();n&&(b.value=n.fieldRules,V())}},X=()=>{y.value&&P()},V=()=>{y.value&&x.value&&P()},P=()=>{const n=performance.now();try{if(c.value=[],!x.value.trim()){S.value=!0,h.value=0,D.value=Math.round(performance.now()-n);return}let s=[];if(C.value.trim())try{const l=new RegExp(C.value,"g");s=[...x.value.matchAll(l)].map(i=>i[0])}catch(l){console.error("Group regex error:",l),s=x.value.split(`
`).filter(r=>r.trim())}else s=x.value.split(`
`).filter(l=>l.trim());s.forEach(l=>{const r={};let i=!1;b.value.forEach(f=>{if(f.name&&f.regex)try{const T=new RegExp(f.regex),F=l.match(T);F&&F[1]!==void 0&&(r[f.name]=F[1],i=!0)}catch(T){console.error(`Field ${f.name} regex error:`,T)}}),i&&c.value.push(r)}),h.value=c.value.length,S.value=!0,p.value=1}catch(s){console.error("Analysis error:",s),alert(t("pages.regexTester.alerts.analysisError")),h.value=0}D.value=Math.round(performance.now()-n)},Y=()=>{p.value>1&&p.value--},Z=()=>{p.value<O.value&&p.value++},ee=n=>{p.value=n},I=n=>{m.value===n?m.value=null:m.value=n},se=()=>{m.value=null},E=()=>{if(c.value.length===0)return"";const n=b.value.map(l=>l.name).join(","),s=c.value.map(l=>b.value.map(r=>{const i=l[r.name]||"";return i.includes(",")||i.includes('"')||i.includes(`
`)?'"'+i.replace(/"/g,'""')+'"':i}).join(","));return n+`
`+s.join(`
`)},L=async n=>{let s="";n==="json"?s=JSON.stringify(c.value,null,2):n==="csv"&&(s=E());try{await navigator.clipboard.writeText(s),alert(t("pages.regexTester.alerts.copied"))}catch{const r=document.createElement("textarea");r.value=s,r.style.position="fixed",r.style.opacity="0",document.body.appendChild(r),r.select();try{document.execCommand("copy"),alert(t("pages.regexTester.alerts.copied"))}catch{alert(t("pages.regexTester.alerts.copyFailed"))}document.body.removeChild(r)}},z=n=>{let s="",l="",r="";n==="json"?(s=JSON.stringify(c.value,null,2),l="regex_results.json",r="application/json"):n==="csv"&&(s=E(),l="regex_results.csv",r="text/csv;charset=utf-8;");const i=new Blob([s],{type:r}),f=URL.createObjectURL(i),T=document.createElement("a");T.href=f,T.download=l,T.click(),URL.revokeObjectURL(f)};return oe(()=>{x.value=`user:Alice age:30
user:Bob age:25
user:Charlie age:35`,C.value="user:(.*?)\\s+age:(.*?)(?=\\n|$)",y.value&&P()}),(n,s)=>(u(),d("main",ue,[e("div",ce,[e("div",pe,[e("h1",ve,a(o(t)("pages.regexTester.title")),1),e("p",ge,a(o(t)("pages.regexTester.description")),1)]),e("div",be,[e("nav",me,[e("ol",xe,[e("li",he,[e("a",_e,a(o(t)("breadcrumb.home")),1)]),e("li",fe,[e("a",ye,a(o(t)("breadcrumb.tools")),1)]),e("li",Te,a(o(t)("pages.regexTester.title_short")),1)])])])]),e("div",we,[e("div",ke,[e("div",Ce,[e("div",Ve,[s[11]||(s[11]=e("i",{class:"bi bi-file-text"},null,-1)),v(" "+a(o(t)("pages.regexTester.rawData")),1)]),e("div",Pe,[R(e("textarea",{class:"form-control input-textarea","onUpdate:modelValue":s[0]||(s[0]=l=>x.value=l),onInput:X,placeholder:o(t)("pages.regexTester.rawDataPlaceholder")},null,40,Re),[[U,x.value]])])])]),e("div",Me,[e("div",je,[e("div",Se,[s[12]||(s[12]=e("i",{class:"bi bi-regex"},null,-1)),v(" "+a(o(t)("pages.regexTester.regexConfig")),1)]),e("div",Ue,[e("label",Ne,a(o(t)("pages.regexTester.groupRegex")),1),R(e("input",{type:"text",class:"form-control group-regex-input mb-3","onUpdate:modelValue":s[1]||(s[1]=l=>C.value=l),onInput:V,placeholder:o(t)("pages.regexTester.groupRegexPlaceholder")},null,40,$e),[[U,C.value]]),e("label",De,a(o(t)("pages.regexTester.fieldRules")),1),e("div",Oe,[(u(!0),d(M,null,j(b.value,(l,r)=>(u(),d("div",{class:"field-rule-item",key:r},[R(e("input",{type:"text",class:"form-control field-name-input","onUpdate:modelValue":i=>l.name=i,onInput:V,placeholder:o(t)("pages.regexTester.fieldNamePlaceholder")},null,40,Ee),[[U,l.name]]),R(e("input",{type:"text",class:"form-control field-regex-input","onUpdate:modelValue":i=>l.regex=i,onInput:V,placeholder:o(t)("pages.regexTester.fieldRegexPlaceholder")},null,40,Fe),[[U,l.regex]]),e("button",{class:"remove-field-btn",onClick:i=>Q(r)},[...s[13]||(s[13]=[e("i",{class:"bi bi-dash"},null,-1)])],8,Je)]))),128))]),e("div",Be,[e("button",{class:"btn btn-ee-base",onClick:K},[s[14]||(s[14]=e("i",{class:"bi bi-plus"},null,-1)),v(" "+a(o(t)("pages.regexTester.addField")),1)]),e("button",{class:"btn btn-ee-base",onClick:W,disabled:!A.value},[s[15]||(s[15]=e("i",{class:"bi bi-arrow-counterclockwise"},null,-1)),v(" "+a(o(t)("pages.regexTester.undo")),1)],8,Ie)]),e("div",Le,[e("div",null,[ne(de,{modelValue:y.value,"onUpdate:modelValue":s[2]||(s[2]=l=>y.value=l),label:o(t)("pages.regexTester.realtimeMatch"),variant:"custom",layout:"label-first"},null,8,["modelValue","label"]),y.value?N("",!0):(u(),d("div",ze,a(o(t)("pages.regexTester.realtimeNote")),1))]),e("button",{class:"btn btn-ee-base active",onClick:P},[s[16]||(s[16]=e("i",{class:"bi bi-play-fill"},null,-1)),v(" "+a(o(t)("pages.regexTester.analyzeBtn")),1)])])])])])]),e("div",Ae,[S.value?(u(),d("div",Ge,[e("div",He,[s[17]||(s[17]=e("i",{class:"bi bi-table"},null,-1)),e("span",null,a(o(t)("pages.regexTester.results.title")),1)]),e("div",qe,[e("div",Ke,[s[18]||(s[18]=e("i",{class:"bi bi-check-circle-fill"},null,-1)),e("span",Qe,a(o(t)("pages.regexTester.results.status"))+":",1),e("span",{class:$(["stat-badge-value",J.value.class])},a(J.value.text),3)]),e("div",We,[s[19]||(s[19]=e("i",{class:"bi bi-stopwatch"},null,-1)),e("span",Xe,a(o(t)("pages.regexTester.results.duration"))+":",1),e("span",Ye,a(D.value)+"ms",1)]),e("div",Ze,[s[20]||(s[20]=e("i",{class:"bi bi-bar-chart-fill"},null,-1)),e("span",es,a(o(t)("pages.regexTester.results.matches"))+":",1),e("span",ss,a(h.value),1)])])])):N("",!0),S.value?N("",!0):(u(),d("div",ts,[s[21]||(s[21]=e("i",{class:"bi bi-table"},null,-1)),v(" "+a(o(t)("pages.regexTester.results.title")),1)])),e("div",ls,[c.value.length>0?(u(),d("div",as,[e("div",os,[e("table",ns,[e("thead",null,[e("tr",null,[e("th",null,a(o(t)("pages.regexTester.results.index")),1),(u(!0),d(M,null,j(b.value,l=>(u(),d("th",{key:l.name},a(l.name),1))),128))])]),e("tbody",null,[(u(!0),d(M,null,j(G.value,(l,r)=>(u(),d("tr",{key:r},[e("td",null,a((p.value-1)*_.value+r+1),1),(u(!0),d(M,null,j(b.value,i=>(u(),d("td",{key:i.name},a(l[i.name]||"-"),1))),128))]))),128))])])]),e("div",rs,[e("div",is,[e("button",{class:"page-btn",onClick:Y,disabled:p.value===1},[...s[22]||(s[22]=[e("i",{class:"bi bi-chevron-left"},null,-1)])],8,ds),(u(!0),d(M,null,j(H.value,l=>(u(),d("button",{class:$(["page-btn",{active:l===p.value}]),key:l,onClick:r=>ee(l)},a(l),11,us))),128)),e("button",{class:"page-btn",onClick:Z,disabled:p.value===O.value},[...s[23]||(s[23]=[e("i",{class:"bi bi-chevron-right"},null,-1)])],8,cs)]),e("div",ps,[R(e("select",{class:"form-select form-select-sm","onUpdate:modelValue":s[3]||(s[3]=l=>_.value=l),onChange:s[4]||(s[4]=l=>p.value=1),style:{width:"auto"}},[e("option",vs,"10 "+a(o(t)("pages.regexTester.pagination.perPage")),1),e("option",gs,"20 "+a(o(t)("pages.regexTester.pagination.perPage")),1),e("option",bs,"50 "+a(o(t)("pages.regexTester.pagination.perPage")),1),e("option",ms,"100 "+a(o(t)("pages.regexTester.pagination.perPage")),1)],544),[[re,_.value]]),e("div",xs,a(o(t)("pages.regexTester.results.showing",{start:(p.value-1)*_.value+1,end:Math.min(p.value*_.value,h.value),total:h.value})),1)])])])):(u(),d("div",hs,[s[24]||(s[24]=e("i",{class:"bi bi-inbox"},null,-1)),e("p",null,a(o(t)("pages.regexTester.results.empty")),1),e("p",_s,a(o(t)("pages.regexTester.results.emptyHint")),1)]))])]),e("div",fs,[e("div",ys,[s[25]||(s[25]=e("i",{class:"bi bi-download"},null,-1)),v(" "+a(o(t)("pages.regexTester.export.title")),1)]),e("div",Ts,[e("div",ws,[e("div",ks,[s[29]||(s[29]=e("span",{class:"export-label"},"JSON:",-1)),e("button",{class:$(["btn btn-ee-base btn-ee-preset",{active:m.value==="json"}]),onClick:s[5]||(s[5]=l=>I("json")),disabled:c.value.length===0},[s[26]||(s[26]=e("i",{class:"bi bi-eye"},null,-1)),v(" "+a(o(t)("pages.regexTester.export.view")),1)],10,Cs),e("button",{class:"btn btn-ee-base btn-ee-preset",onClick:s[6]||(s[6]=l=>L("json")),disabled:c.value.length===0},[s[27]||(s[27]=e("i",{class:"bi bi-clipboard"},null,-1)),v(" "+a(o(t)("pages.regexTester.export.copy")),1)],8,Vs),e("button",{class:"btn btn-ee-base btn-ee-preset",onClick:s[7]||(s[7]=l=>z("json")),disabled:c.value.length===0},[s[28]||(s[28]=e("i",{class:"bi bi-download"},null,-1)),v(" "+a(o(t)("pages.regexTester.export.downloadJson")),1)],8,Ps)]),e("div",Rs,[s[33]||(s[33]=e("span",{class:"export-label"},"CSV:",-1)),e("button",{class:$(["btn btn-ee-base btn-ee-preset",{active:m.value==="csv"}]),onClick:s[8]||(s[8]=l=>I("csv")),disabled:c.value.length===0},[s[30]||(s[30]=e("i",{class:"bi bi-eye"},null,-1)),v(" "+a(o(t)("pages.regexTester.export.view")),1)],10,Ms),e("button",{class:"btn btn-ee-base btn-ee-preset",onClick:s[9]||(s[9]=l=>L("csv")),disabled:c.value.length===0},[s[31]||(s[31]=e("i",{class:"bi bi-clipboard"},null,-1)),v(" "+a(o(t)("pages.regexTester.export.copy")),1)],8,js),e("button",{class:"btn btn-ee-base btn-ee-preset",onClick:s[10]||(s[10]=l=>z("csv")),disabled:c.value.length===0},[s[32]||(s[32]=e("i",{class:"bi bi-download"},null,-1)),v(" "+a(o(t)("pages.regexTester.export.downloadCsv")),1)],8,Ss)])]),m.value?(u(),d("div",Us,[e("div",Ns,[e("span",$s,a(o(t)("pages.regexTester.export.preview",{format:m.value.toUpperCase()})),1),e("button",{class:"close-preview-btn",onClick:se},[s[34]||(s[34]=e("i",{class:"bi bi-x"},null,-1)),v(" "+a(o(t)("pages.regexTester.export.closePreview")),1)])]),e("textarea",{class:"form-control preview-textarea",value:q.value,readonly:""},null,8,Ds)])):N("",!0)])]),e("div",Os,[e("div",Es,[s[35]||(s[35]=e("i",{class:"bi bi-info-circle"},null,-1)),v(" "+a(o(t)("pages.regexTester.notice.title")),1)]),e("div",Fs,[e("div",Js,[e("ul",null,[e("li",null,a(o(t)("pages.regexTester.notice.item1")),1),e("li",null,a(o(t)("pages.regexTester.notice.item2")),1),e("li",null,a(o(t)("pages.regexTester.notice.item3")),1),e("li",null,a(o(t)("pages.regexTester.notice.item4")),1)])])])])]))}}),As=ie(Bs,[["__scopeId","data-v-e28cdfd1"]]);export{As as default};
