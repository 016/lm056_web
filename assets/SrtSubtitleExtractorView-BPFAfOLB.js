import{d as A,u as F,r as n,c as g,i as G,a as H,b as t,t as a,e as l,g as b,w as h,j as J,v as k,n as M,o as K,_ as O}from"./index--9LqmOjy.js";const P={class:"main-content flex-grow-1"},Q={class:"page-header-row"},W={class:"page-header-left"},X={class:"page-title"},Y={class:"page-description"},Z={class:"breadcrumb-custom"},tt={"aria-label":"breadcrumb"},et={class:"breadcrumb mb-0"},st={class:"breadcrumb-item"},rt={href:"#"},at={class:"breadcrumb-item"},ot={href:"#"},lt={class:"breadcrumb-item active","aria-current":"page"},nt={class:"card tool-card no-footer"},ct={class:"card-body"},it={class:"control-buttons"},ut={class:"toggle-group"},dt={class:"toggle-label"},pt={class:"switch"},vt={class:"input-group-custom"},bt={for:"contentLines"},_t={class:"row"},mt={class:"col-lg-6 col-md-12 mb-3 mb-lg-0 pe-0"},xt={class:"card tool-card no-footer rounded-0"},gt={class:"card-header"},ht={class:"line-count"},ft={class:"card-body p-0"},Et={class:"textarea-container"},Lt={class:"textarea-wrapper"},wt=["placeholder"],yt={class:"col-lg-6 col-md-12 ps-0"},Ct={class:"card tool-card no-footer rounded-0"},kt={class:"card-header"},Nt={class:"line-count"},St={class:"card-body p-0"},Tt={class:"textarea-container"},Vt={class:"textarea-wrapper"},It=["placeholder"],Ut={class:"card tool-card no-footer"},Bt={class:"card-header"},Mt={class:"card-body"},$t={class:"notice-box"},Rt=A({__name:"SrtSubtitleExtractorView",setup(jt){const{t:r}=F(),c=n(""),d=n(""),_=n(!0),f=n(5),N=n(r("pages.srtExtractor.status.ready")),m=n(""),x=n("bi bi-info-circle"),u=n([]),E=n(null),L=n(null),w=n(null),y=n(null),S=g(()=>c.value?c.value.split(`
`).length:0),T=g(()=>d.value?d.value.split(`
`).length:0),$=g(()=>V(S.value)),R=g(()=>V(T.value)),V=o=>{let e="";for(let s=1;s<=o;s++)e+=s+`
`;return e},I=o=>{!E.value||!L.value||!w.value||!y.value||(o==="srt"?w.value.scrollTop=E.value.scrollTop:y.value.scrollTop=L.value.scrollTop)},U=()=>{},i=(o,e,s={})=>{switch(N.value=r(e,s),o){case"success":m.value="success",x.value="bi bi-check-circle";break;case"error":m.value="error",x.value="bi bi-exclamation-circle";break;default:m.value="",x.value="bi bi-info-circle"}},j=()=>{if(!c.value.trim()){i("error","pages.srtExtractor.status.inputSrt");return}try{const o=c.value.split(`
`),e=[];u.value=[];let s=0,p=1;for(;s<o.length;){const z=o[s].trim();if(/^\d+$/.test(z)&&(s++,s<o.length&&/\d{2}:\d{2}:\d{2},\d{3}\s*-->\s*\d{2}:\d{2}:\d{2},\d{3}/.test(o[s]))){s++;let B=0;for(;s<o.length&&B<f.value;){const C=o[s].trim();if(C==="")break;u.value.push({lineIndex:s,lineNumber:p});const q=_.value?`${p}. ${C}`:C;e.push(q),p++,B++,s++}}s++}d.value=e.join(`
`);const v=e.length;i("success","pages.srtExtractor.status.successExtract",{count:v})}catch(o){i("error","pages.srtExtractor.status.errorExtract",{message:o.message})}},D=()=>{if(!c.value.trim()){i("error","pages.srtExtractor.status.noSrt");return}if(!d.value.trim()){i("error","pages.srtExtractor.status.noContent");return}if(u.value.length===0){i("error","pages.srtExtractor.status.needExtract");return}try{const o=c.value.split(`
`),e=d.value.split(`
`);if(e.length!==u.value.length){i("error","pages.srtExtractor.status.mismatch",{extracted:e.length,original:u.value.length});return}for(let s=u.value.length-1;s>=0;s--){const p=u.value[s];let v=e[s];_.value&&(v=v.replace(/^(\d+)\.\s+/,"")),o[p.lineIndex]=v}c.value=o.join(`
`),i("success","pages.srtExtractor.status.successUpdate",{count:u.value.length})}catch(o){i("error","pages.srtExtractor.status.errorUpdate",{message:o.message})}};return G(()=>{c.value=`1
00:00:01,000 --> 00:00:03,500
这是第1.1行字幕。
这是第1.2行字幕。
这是第1.3行字幕。

2
00:00:04,200 --> 00:00:06,800
这是第2.1行字幕。

3
00:00:07,100 --> 00:00:09,900
这是第3.1行字幕，
这是第3.2行字幕，`}),(o,e)=>(K(),H("main",P,[t("div",Q,[t("div",W,[t("h1",X,a(l(r)("pages.srtExtractor.title")),1),t("p",Y,a(l(r)("pages.srtExtractor.description")),1)]),t("div",Z,[t("nav",tt,[t("ol",et,[t("li",st,[t("a",rt,a(l(r)("breadcrumb.home")),1)]),t("li",at,[t("a",ot,a(l(r)("breadcrumb.tools")),1)]),t("li",lt,a(l(r)("pages.srtExtractor.title_short")),1)])])])]),t("div",nt,[t("div",ct,[t("div",it,[t("button",{class:"extract-btn",onClick:j},[e[6]||(e[6]=t("i",{class:"bi bi-play-circle"},null,-1)),b(" "+a(l(r)("pages.srtExtractor.extractBtn")),1)]),t("button",{class:"update-btn",onClick:D},[e[7]||(e[7]=t("i",{class:"bi bi-arrow-left-circle"},null,-1)),b(" "+a(l(r)("pages.srtExtractor.updateBtn")),1)]),e[9]||(e[9]=t("div",{class:"separator"},null,-1)),t("div",ut,[t("span",dt,a(l(r)("pages.srtExtractor.showLineNumbers")),1),t("label",pt,[h(t("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=s=>_.value=s)},null,512),[[J,_.value]]),e[8]||(e[8]=t("span",{class:"slider-switch"},null,-1))])]),t("div",vt,[t("label",bt,a(l(r)("pages.srtExtractor.maxLines"))+":",1),h(t("input",{type:"number",id:"contentLines","onUpdate:modelValue":e[1]||(e[1]=s=>f.value=s),min:"1",max:"5"},null,512),[[k,f.value,void 0,{number:!0}]])])]),t("div",{class:M(["status-info",m.value])},[t("i",{class:M(x.value)},null,2),t("span",null,a(N.value),1)],2)])]),t("div",_t,[t("div",mt,[t("div",xt,[t("div",gt,[e[10]||(e[10]=t("i",{class:"bi bi-file-text"},null,-1)),b(" "+a(l(r)("pages.srtExtractor.input.title"))+" ",1),t("span",ht,a(l(r)("pages.srtExtractor.lineCount",{count:S.value})),1)]),t("div",ft,[t("div",Et,[t("div",{class:"line-numbers",ref_key:"srtLineNumbersRef",ref:w},a($.value),513),t("div",Lt,[h(t("textarea",{class:"custom-textarea",ref_key:"srtTextarea",ref:E,"onUpdate:modelValue":e[2]||(e[2]=s=>c.value=s),onScroll:e[3]||(e[3]=s=>I("srt")),onInput:U,placeholder:l(r)("pages.srtExtractor.input.placeholder")},null,40,wt),[[k,c.value]])])])])])]),t("div",yt,[t("div",Ct,[t("div",kt,[e[11]||(e[11]=t("i",{class:"bi bi-list-check"},null,-1)),b(" "+a(l(r)("pages.srtExtractor.output.title"))+" ",1),t("span",Nt,a(l(r)("pages.srtExtractor.lineCount",{count:T.value})),1)]),t("div",St,[t("div",Tt,[t("div",{class:"line-numbers",ref_key:"resultLineNumbersRef",ref:y},a(R.value),513),t("div",Vt,[h(t("textarea",{class:"custom-textarea",ref_key:"resultTextarea",ref:L,"onUpdate:modelValue":e[4]||(e[4]=s=>d.value=s),onScroll:e[5]||(e[5]=s=>I("result")),onInput:U,placeholder:l(r)("pages.srtExtractor.output.placeholder")},null,40,It),[[k,d.value]])])])])])])]),t("div",Ut,[t("div",Bt,[e[12]||(e[12]=t("i",{class:"bi bi-info-circle"},null,-1)),b(" "+a(l(r)("pages.srtExtractor.notice.title")),1)]),t("div",Mt,[t("div",$t,[t("ul",null,[t("li",null,a(l(r)("pages.srtExtractor.notice.item1")),1),t("li",null,a(l(r)("pages.srtExtractor.notice.item2")),1),t("li",null,a(l(r)("pages.srtExtractor.notice.item3")),1),t("li",null,a(l(r)("pages.srtExtractor.notice.item4")),1)])])])])]))}}),zt=O(Rt,[["__scopeId","data-v-857003b8"]]);export{zt as default};
