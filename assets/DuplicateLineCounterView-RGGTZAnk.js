import{d as q,u as P,r as o,c as R,l as U,k as $,b as p,e,t as s,f as l,j as H,h as f,w as M,p as G,F as N,i as z,v as J,n as K,o as m,_ as Q}from"./index-C4d0zKoG.js";import{T as W}from"./ToggleSwitch-Cjk9m-8X.js";const X={class:"main-content flex-grow-1"},Y={class:"page-header-row"},Z={class:"page-header-left"},ee={class:"page-title"},te={class:"page-description"},se={class:"breadcrumb-custom"},ae={"aria-label":"breadcrumb"},le={class:"breadcrumb mb-0"},ne={class:"breadcrumb-item"},oe={href:"#"},ie={class:"breadcrumb-item"},ue={href:"#"},re={class:"breadcrumb-item active","aria-current":"page"},ce={class:"card tool-card params-status-card"},de={class:"card-body"},pe={class:"params-row"},me={class:"realtime-switch"},ve=["disabled"],_e={class:"format-select-group"},be={value:"withCount"},ge={value:"itemOnly"},he={class:"row"},fe={class:"col-lg-6 col-md-12 mb-3"},Le={class:"card tool-card no-footer"},Ce={class:"card-header"},ye={class:"card-body p-0"},xe={class:"textarea-container"},Te=["placeholder"],we={class:"col-lg-6 col-md-12 mb-3"},ke={class:"card tool-card no-footer"},Ve={class:"card-header d-flex justify-content-between align-items-center"},Ae={class:"d-flex align-items-center gap-3",style:{"font-size":"0.875rem"}},Me={class:"status-item"},Ne={class:"status-item"},ze={class:"status-item"},Be={class:"card-body p-0"},De={key:0,class:"textarea-container"},Oe=["value"],Se={key:1,class:"empty-result"},Ie={class:"text-muted mt-1"},je={class:"card tool-card no-footer"},Ee={class:"card-header"},Fe={class:"card-body"},qe={class:"notice-box"},Pe=q({__name:"DuplicateLineCounterView",setup(Re){const{t}=P(),u=o(""),v=o(""),_=o(!0),g=o("withCount"),r=o(t("pages.duplicateLineCounter.status.ready")),L=o("-"),C=o(0),y=o(0),w=o(1),k=o(1),x=o(null),B=o(null),T=o(null),D=o(null),O=R(()=>r.value===t("pages.duplicateLineCounter.status.ready")?"status-ready":r.value===t("pages.duplicateLineCounter.status.complete")?"status-complete":r.value.includes("错误")||r.value.includes("error")?"status-error":""),S=()=>{V(),_.value&&h()},I=()=>{_.value||h()},h=()=>{const i=performance.now(),a=u.value.split(`
`);C.value=a.length;const n=new Map;a.forEach(c=>{const d=c.trim();d&&n.set(d,(n.get(d)||0)+1)}),y.value=n.size;const b=Array.from(n.entries()).sort((c,d)=>d[1]-c[1]);g.value==="withCount"?v.value=b.map(([c,d])=>`${c} - ${d}`).join(`
`):v.value=b.map(([c])=>c).join(`
`),j();const F=(performance.now()-i).toFixed(2);L.value=`${F}ms`,u.value.trim()?r.value=t("pages.duplicateLineCounter.status.complete"):(r.value=t("pages.duplicateLineCounter.status.ready"),v.value="",C.value=0,y.value=0,L.value="-")},V=()=>{const i=u.value.split(`
`);w.value=Math.max(i.length,1)},j=()=>{const i=v.value.split(`
`);k.value=Math.max(i.length,1)},A=(i,a)=>{const b=i.target.scrollTop;a==="input"?x.value&&(x.value.scrollTop=b):a==="result"&&T.value&&(T.value.scrollTop=b)};U(g,()=>{u.value.trim()&&h()});const E=()=>{const i=`Apple
Banana
Apple
Orange

Banana
Apple
Pear
Orange
Pear`;u.value=i,h(),V()};return $(()=>{E()}),(i,a)=>(m(),p("main",X,[e("div",Y,[e("div",Z,[e("h1",ee,s(l(t)("pages.duplicateLineCounter.title")),1),e("p",te,s(l(t)("pages.duplicateLineCounter.description")),1)]),e("div",se,[e("nav",ae,[e("ol",le,[e("li",ne,[e("a",oe,s(l(t)("breadcrumb.home")),1)]),e("li",ie,[e("a",ue,s(l(t)("breadcrumb.tools")),1)]),e("li",re,s(l(t)("pages.duplicateLineCounter.title_short")),1)])])])]),e("div",ce,[e("div",de,[e("div",pe,[e("div",me,[H(W,{modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=n=>_.value=n),label:l(t)("pages.duplicateLineCounter.realtimeToggle"),variant:"custom",layout:"switch-first"},null,8,["modelValue","label"])]),e("button",{class:"btn btn-ee-base",disabled:_.value,onClick:I},[a[5]||(a[5]=e("i",{class:"bi bi-play-circle"},null,-1)),f(" "+s(l(t)("pages.duplicateLineCounter.manualAnalyzeBtn")),1)],8,ve),e("div",_e,[e("label",null,s(l(t)("pages.duplicateLineCounter.formatLabel"))+":",1),M(e("select",{class:"form-select format-select","onUpdate:modelValue":a[1]||(a[1]=n=>g.value=n)},[e("option",be,s(l(t)("pages.duplicateLineCounter.formatOptions.withCount")),1),e("option",ge,s(l(t)("pages.duplicateLineCounter.formatOptions.itemOnly")),1)],512),[[G,g.value]])])])])]),e("div",he,[e("div",fe,[e("div",Le,[e("div",Ce,[a[6]||(a[6]=e("i",{class:"bi bi-pencil-square"},null,-1)),f(" "+s(l(t)("pages.duplicateLineCounter.inputLabel")),1)]),e("div",ye,[e("div",xe,[e("div",{class:"line-numbers",ref_key:"inputLineNumbers",ref:x},[(m(!0),p(N,null,z(w.value,n=>(m(),p("div",{key:n},s(n),1))),128))],512),M(e("textarea",{class:"textarea-input","onUpdate:modelValue":a[2]||(a[2]=n=>u.value=n),onInput:S,onScroll:a[3]||(a[3]=n=>A(n,"input")),placeholder:l(t)("pages.duplicateLineCounter.inputPlaceholder"),ref_key:"inputTextarea",ref:B},null,40,Te),[[J,u.value]])])])])]),e("div",we,[e("div",ke,[e("div",Ve,[e("div",null,[a[7]||(a[7]=e("i",{class:"bi bi-bar-chart"},null,-1)),f(" "+s(l(t)("pages.duplicateLineCounter.resultLabel")),1)]),e("div",Ae,[e("div",{class:K(["status-item",O.value])},[e("span",null,s(l(t)("pages.duplicateLineCounter.statusLabel"))+":",1),e("strong",null,s(r.value),1)],2),e("div",Me,[e("span",null,s(l(t)("pages.duplicateLineCounter.analysisTimeLabel"))+":",1),e("strong",null,s(L.value),1)]),e("div",Ne,[e("span",null,s(l(t)("pages.duplicateLineCounter.totalLinesLabel"))+":",1),e("strong",null,s(C.value),1)]),e("div",ze,[e("span",null,s(l(t)("pages.duplicateLineCounter.uniqueCountLabel"))+":",1),e("strong",null,s(y.value),1)])])]),e("div",Be,[v.value?(m(),p("div",De,[e("div",{class:"line-numbers",ref_key:"resultLineNumbers",ref:T},[(m(!0),p(N,null,z(k.value,n=>(m(),p("div",{key:n},s(n),1))),128))],512),e("textarea",{class:"textarea-result",value:v.value,onScroll:a[4]||(a[4]=n=>A(n,"result")),readonly:"",ref_key:"resultTextarea",ref:D},null,40,Oe)])):(m(),p("div",Se,[a[8]||(a[8]=e("i",{class:"bi bi-inbox"},null,-1)),e("p",null,s(l(t)("pages.duplicateLineCounter.emptyResult")),1),e("p",Ie,s(l(t)("pages.duplicateLineCounter.emptyResultHint")),1)]))])])])]),e("div",je,[e("div",Ee,[a[9]||(a[9]=e("i",{class:"bi bi-info-circle"},null,-1)),f(" "+s(l(t)("pages.duplicateLineCounter.notice.title")),1)]),e("div",Fe,[e("div",qe,[e("ul",null,[e("li",null,s(l(t)("pages.duplicateLineCounter.notice.item1")),1),e("li",null,s(l(t)("pages.duplicateLineCounter.notice.item2")),1),e("li",null,s(l(t)("pages.duplicateLineCounter.notice.item3")),1),e("li",null,s(l(t)("pages.duplicateLineCounter.notice.item4")),1)])])])])]))}}),Ge=Q(Pe,[["__scopeId","data-v-f2b49a31"]]);export{Ge as default};
