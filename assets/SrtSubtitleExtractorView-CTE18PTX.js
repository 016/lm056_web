import{d as A,u as F,r as n,c as g,k as G,b as H,e as t,t as o,f as l,j as J,h as b,w as C,v as k,n as M,o as K,_ as O}from"./index-C4d0zKoG.js";import{T as P}from"./ToggleSwitch-Cjk9m-8X.js";const Q={class:"main-content flex-grow-1"},W={class:"page-header-row"},X={class:"page-header-left"},Y={class:"page-title"},Z={class:"page-description"},tt={class:"breadcrumb-custom"},et={"aria-label":"breadcrumb"},st={class:"breadcrumb mb-0"},rt={class:"breadcrumb-item"},at={href:"#"},ot={class:"breadcrumb-item"},lt={href:"#"},nt={class:"breadcrumb-item active","aria-current":"page"},ct={class:"card tool-card no-footer"},it={class:"card-body"},ut={class:"control-buttons"},dt={class:"input-group-custom"},pt={for:"contentLines"},vt={class:"row"},bt={class:"col-lg-6 col-md-12 mb-3 mb-lg-0 pe-0"},mt={class:"card tool-card no-footer rounded-0"},_t={class:"card-header"},xt={class:"line-count"},gt={class:"card-body p-0"},ht={class:"textarea-container"},ft={class:"textarea-wrapper"},Et=["placeholder"],Lt={class:"col-lg-6 col-md-12 ps-0"},wt={class:"card tool-card no-footer rounded-0"},yt={class:"card-header"},Ct={class:"line-count"},kt={class:"card-body p-0"},Nt={class:"textarea-container"},Tt={class:"textarea-wrapper"},St=["placeholder"],Vt={class:"card tool-card no-footer"},It={class:"card-header"},Ut={class:"card-body"},Bt={class:"notice-box"},$t=A({__name:"SrtSubtitleExtractorView",setup(Mt){const{t:r}=F(),c=n(""),d=n(""),m=n(!0),h=n(5),N=n(r("pages.srtExtractor.status.ready")),_=n(""),x=n("bi bi-info-circle"),u=n([]),f=n(null),E=n(null),L=n(null),w=n(null),T=g(()=>c.value?c.value.split(`
`).length:0),S=g(()=>d.value?d.value.split(`
`).length:0),R=g(()=>V(T.value)),j=g(()=>V(S.value)),V=a=>{let e="";for(let s=1;s<=a;s++)e+=s+`
`;return e},I=a=>{!f.value||!E.value||!L.value||!w.value||(a==="srt"?L.value.scrollTop=f.value.scrollTop:w.value.scrollTop=E.value.scrollTop)},U=()=>{},i=(a,e,s={})=>{switch(N.value=r(e,s),a){case"success":_.value="success",x.value="bi bi-check-circle";break;case"error":_.value="error",x.value="bi bi-exclamation-circle";break;default:_.value="",x.value="bi bi-info-circle"}},B=()=>{if(!c.value.trim()){i("error","pages.srtExtractor.status.inputSrt");return}try{const a=c.value.split(`
`),e=[];u.value=[];let s=0,p=1;for(;s<a.length;){const z=a[s].trim();if(/^\d+$/.test(z)&&(s++,s<a.length&&/\d{2}:\d{2}:\d{2},\d{3}\s*-->\s*\d{2}:\d{2}:\d{2},\d{3}/.test(a[s]))){s++;let $=0;for(;s<a.length&&$<h.value;){const y=a[s].trim();if(y==="")break;u.value.push({lineIndex:s,lineNumber:p});const q=m.value?`${p}-${y}`:y;e.push(q),p++,$++,s++}}s++}d.value=e.join(`
`);const v=e.length;i("success","pages.srtExtractor.status.successExtract",{count:v})}catch(a){i("error","pages.srtExtractor.status.errorExtract",{message:a.message})}},D=()=>{if(!c.value.trim()){i("error","pages.srtExtractor.status.noSrt");return}if(!d.value.trim()){i("error","pages.srtExtractor.status.noContent");return}if(u.value.length===0){i("error","pages.srtExtractor.status.needExtract");return}try{const a=c.value.split(`
`),e=d.value.split(`
`);if(e.length!==u.value.length){i("error","pages.srtExtractor.status.mismatch",{extracted:e.length,original:u.value.length});return}for(let s=u.value.length-1;s>=0;s--){const p=u.value[s];let v=e[s];m.value&&(v=v.replace(/^(\d+)-/,"")),a[p.lineIndex]=v}c.value=a.join(`
`),i("success","pages.srtExtractor.status.successUpdate",{count:u.value.length})}catch(a){i("error","pages.srtExtractor.status.errorUpdate",{message:a.message})}};return G(()=>{c.value=`1
00:00:01,000 --> 00:00:03,500
这是第1.1行字幕。
这是第1.2行字幕。
这是第1.3行字幕。

2
00:00:04,200 --> 00:00:06,800
这是第2.1行字幕。

3
00:00:07,100 --> 00:00:09,900
这是第3.1行字幕，
这是第3.2行字幕，`,B()}),(a,e)=>(K(),H("main",Q,[t("div",W,[t("div",X,[t("h1",Y,o(l(r)("pages.srtExtractor.title")),1),t("p",Z,o(l(r)("pages.srtExtractor.description")),1)]),t("div",tt,[t("nav",et,[t("ol",st,[t("li",rt,[t("a",at,o(l(r)("breadcrumb.home")),1)]),t("li",ot,[t("a",lt,o(l(r)("breadcrumb.tools")),1)]),t("li",nt,o(l(r)("pages.srtExtractor.title_short")),1)])])])]),t("div",ct,[t("div",it,[t("div",ut,[t("button",{class:"btn btn-ee-base active",onClick:B},[e[6]||(e[6]=t("i",{class:"bi bi-play-circle"},null,-1)),b(" "+o(l(r)("pages.srtExtractor.extractBtn")),1)]),t("button",{class:"btn btn-ee-base",onClick:D},[e[7]||(e[7]=t("i",{class:"bi bi-arrow-left-circle"},null,-1)),b(" "+o(l(r)("pages.srtExtractor.updateBtn")),1)]),e[8]||(e[8]=t("div",{class:"separator"},null,-1)),J(P,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),label:l(r)("pages.srtExtractor.showLineNumbers"),variant:"custom",layout:"label-first"},null,8,["modelValue","label"]),t("div",dt,[t("label",pt,o(l(r)("pages.srtExtractor.maxLines"))+":",1),C(t("input",{type:"number",id:"contentLines","onUpdate:modelValue":e[1]||(e[1]=s=>h.value=s),min:"1",max:"5"},null,512),[[k,h.value,void 0,{number:!0}]])])]),t("div",{class:M(["status-info",_.value])},[t("i",{class:M(x.value)},null,2),t("span",null,o(N.value),1)],2)])]),t("div",vt,[t("div",bt,[t("div",mt,[t("div",_t,[e[9]||(e[9]=t("i",{class:"bi bi-file-text"},null,-1)),b(" "+o(l(r)("pages.srtExtractor.input.title"))+" ",1),t("span",xt,o(l(r)("pages.srtExtractor.lineCount",{count:T.value})),1)]),t("div",gt,[t("div",ht,[t("div",{class:"line-numbers",ref_key:"srtLineNumbersRef",ref:L},o(R.value),513),t("div",ft,[C(t("textarea",{class:"custom-textarea",ref_key:"srtTextarea",ref:f,"onUpdate:modelValue":e[2]||(e[2]=s=>c.value=s),onScroll:e[3]||(e[3]=s=>I("srt")),onInput:U,placeholder:l(r)("pages.srtExtractor.input.placeholder")},null,40,Et),[[k,c.value]])])])])])]),t("div",Lt,[t("div",wt,[t("div",yt,[e[10]||(e[10]=t("i",{class:"bi bi-list-check"},null,-1)),b(" "+o(l(r)("pages.srtExtractor.output.title"))+" ",1),t("span",Ct,o(l(r)("pages.srtExtractor.lineCount",{count:S.value})),1)]),t("div",kt,[t("div",Nt,[t("div",{class:"line-numbers",ref_key:"resultLineNumbersRef",ref:w},o(j.value),513),t("div",Tt,[C(t("textarea",{class:"custom-textarea",ref_key:"resultTextarea",ref:E,"onUpdate:modelValue":e[4]||(e[4]=s=>d.value=s),onScroll:e[5]||(e[5]=s=>I("result")),onInput:U,placeholder:l(r)("pages.srtExtractor.output.placeholder")},null,40,St),[[k,d.value]])])])])])])]),t("div",Vt,[t("div",It,[e[11]||(e[11]=t("i",{class:"bi bi-info-circle"},null,-1)),b(" "+o(l(r)("pages.srtExtractor.notice.title")),1)]),t("div",Ut,[t("div",Bt,[t("ul",null,[t("li",null,o(l(r)("pages.srtExtractor.notice.item1")),1),t("li",null,o(l(r)("pages.srtExtractor.notice.item2")),1),t("li",null,o(l(r)("pages.srtExtractor.notice.item3")),1),t("li",null,o(l(r)("pages.srtExtractor.notice.item4")),1)])])])])]))}}),Dt=O($t,[["__scopeId","data-v-1654d166"]]);export{Dt as default};
