import{d as F,u as V,r as T,c as E,i as M,q as N,a as r,b as s,f as j,t as e,e as d,s as q,x as z,g as m,y as P,F as v,h as _,n as A,w as R,z as I,A as h,o as u,_ as U}from"./index-CFDJI91X.js";const X={class:"main-content flex-grow-1"},Y={class:"page-header-row"},H={class:"page-header-left"},J={class:"page-title"},K={class:"page-description"},O={class:"breadcrumb-custom"},Q={"aria-label":"breadcrumb"},W={class:"breadcrumb mb-0"},Z={class:"breadcrumb-item"},ss={class:"breadcrumb-item active","aria-current":"page"},ts={key:0,class:"card tool-card"},es={class:"card-body"},as={class:"waiting-prompt"},is={class:"waiting-title"},os={class:"waiting-steps"},ns={key:1,class:"gamepad-tabs border-bottom"},ds={class:"d-flex flex-wrap align-items-center gap-2"},ls=["onClick"],cs={class:"loading-indicator"},rs={class:"card tool-card"},us={class:"card-header"},ps={class:"card-body"},ms={class:"gamepad-header"},gs={class:"gamepad-title"},vs={class:"gamepad-meta"},_s={class:"gamepad-meta-item"},bs={class:"gamepad-meta-item"},hs={class:"card tool-card"},ys={class:"card-header"},fs={class:"card-body p-2"},xs={class:"button-grid m-0"},ks={class:"button-label"},ws={class:"button-value"},Ts={class:"card tool-card"},js={class:"card-header"},As={class:"card-body p-2"},Ss={class:"axis-grid"},Ds={class:"axis-label"},Ls={class:"axis-indicator"},Cs={class:"axis-value"},Gs={class:"joystick-container mb-1"},$s={class:"joystick-wrapper"},Bs={class:"joystick-title"},Fs={class:"joystick-box"},Vs={class:"joystick-wrapper"},Es={class:"joystick-title"},Ms={class:"joystick-box"},Ns={class:"card-footer vibrate-section"},qs=["onClick"],zs={class:"card tool-card no-footer"},Ps={class:"card-header"},Rs={class:"card-body"},Is={class:"notice-box"},Us=F({__name:"GamepadTestView",setup(Xs){const{t:o,tm:S}=V(),p=T([]),y=T(0);let b=null;const D={i_0:" - A",i_1:" - B",i_2:" - X",i_3:" - Y",i_4:" - LB",i_5:" - RB",i_6:" - LT",i_7:" - RT",i_8:" - Map",i_9:" - Menu",i_10:" - LS",i_11:" - RS",i_12:" - ↑",i_13:" - ↓",i_14:" - ←",i_15:" - →",i_17:" - Share"},L=E(()=>{const a=S("pages.gamepadTest.notice.list");return Array.isArray(a)?a:[]}),f=a=>new Date(a).toLocaleTimeString(),C=a=>{if(a===0)return{width:"0"};const t=Math.abs(a)*50;return a<0?{width:`${t}%`,left:`${50-t}%`}:{width:`${t}%`,left:"50%"}},G=a=>{const t=p.value[a];if(!t||t.axes.length<2)return{};const l=t.axes[0]||0,i=t.axes[1]||0;return{left:`${50+l*40}%`,top:`${50+i*40}%`}},$=a=>{const t=p.value[a];if(!t||t.axes.length<4)return{};const l=t.axes[2]||0,i=t.axes[3]||0;return{left:`${50+l*40}%`,top:`${50+i*40}%`}},B=a=>{const t=navigator.getGamepads()[p.value[a].index];t&&t.vibrationActuator&&t.vibrationActuator.playEffect("dual-rumble",{startDelay:0,duration:500,weakMagnitude:1,strongMagnitude:1})},x=()=>{const a=navigator.getGamepads(),t=[];for(const l of a){if(!l)continue;const i=p.value.find(c=>c.index===l.index),n={id:l.id,index:l.index,timestamp:l.timestamp,buttons:l.buttons.map(c=>({pressed:c.pressed,value:c.value})),axes:[...l.axes],startDate:i?i.startDate:Date.now(),lastAction:Date.now()};t.push(n)}if(p.value.length!==t.length)p.value=t;else for(let l=0;l<t.length;l++){const i=p.value[l],n=t[l];i.buttons=n.buttons,i.axes=n.axes,i.timestamp=n.timestamp,n.timestamp>i.timestamp&&(i.lastAction=Date.now())}b=requestAnimationFrame(x)},k=a=>{console.log("Gamepad connected at index %d: %s. %d buttons, %d axes.",a.gamepad.index,a.gamepad.id,a.gamepad.buttons.length,a.gamepad.axes.length)},w=a=>{console.log("Gamepad disconnected from index %d: %s",a.gamepad.index,a.gamepad.id)};return M(()=>{window.addEventListener("gamepadconnected",k),window.addEventListener("gamepaddisconnected",w),b=requestAnimationFrame(x)}),N(()=>{window.removeEventListener("gamepadconnected",k),window.removeEventListener("gamepaddisconnected",w),b&&cancelAnimationFrame(b)}),(a,t)=>{const l=P("router-link");return u(),r("main",X,[s("div",Y,[s("div",H,[s("h1",J,e(d(o)("pages.gamepadTest.title")),1),s("p",K,e(d(o)("pages.gamepadTest.description")),1)]),s("div",O,[s("nav",Q,[s("ol",W,[s("li",Z,[q(l,{to:"/"},{default:z(()=>[m(e(d(o)("nav.home")),1)]),_:1})]),s("li",ss,e(d(o)("pages.gamepadTest.title_short")),1)])])])]),p.value.length<1?(u(),r("div",ts,[s("div",es,[s("div",as,[t[0]||(t[0]=s("div",{class:"spinner-border text-primary waiting-icon",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1)),s("div",is,e(d(o)("pages.gamepadTest.loadingNewPad")),1),s("div",os,[s("ol",null,[s("li",null,e(d(o)("pages.gamepadTest.step1")),1),s("li",null,e(d(o)("pages.gamepadTest.step2")),1),s("li",null,e(d(o)("pages.gamepadTest.step3")),1)])])])])])):j("",!0),p.value.length>0?(u(),r("div",ns,[s("div",ds,[(u(!0),r(v,null,_(p.value,(i,n)=>(u(),r("button",{key:n,class:A(["gamepad-tab-btn",{active:y.value===n}]),onClick:c=>y.value=n},[t[1]||(t[1]=s("i",{class:"bi bi-controller me-2"},null,-1)),m(" "+e(d(o)("pages.gamepadTest.controller"))+" #"+e(n+1),1)],10,ls))),128)),s("div",cs,[t[2]||(t[2]=s("span",{class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},null,-1)),s("span",null,e(d(o)("pages.gamepadTest.loadingNewPad")),1)])])])):j("",!0),(u(!0),r(v,null,_(p.value,(i,n)=>R((u(),r("div",{key:n},[s("div",rs,[s("div",us,[t[3]||(t[3]=s("i",{class:"bi bi-info-circle"},null,-1)),m(" "+e(d(o)("pages.gamepadTest.gamepadInfo")),1)]),s("div",ps,[s("div",ms,[s("div",gs,e(i.id),1),s("div",vs,[s("div",_s,[t[4]||(t[4]=s("i",{class:"bi bi-clock me-1"},null,-1)),m(" "+e(d(o)("pages.gamepadTest.startDate"))+": "+e(f(i.startDate)),1)]),s("div",bs,[t[5]||(t[5]=s("i",{class:"bi bi-activity me-1"},null,-1)),m(" "+e(d(o)("pages.gamepadTest.lastAction"))+": "+e(f(i.lastAction)),1)])])])])]),s("div",hs,[s("div",ys,[t[6]||(t[6]=s("i",{class:"bi bi-circle"},null,-1)),m(" "+e(d(o)("pages.gamepadTest.btnValues")),1)]),s("div",fs,[s("div",xs,[(u(!0),r(v,null,_(i.buttons,(c,g)=>(u(),r("div",{key:g,class:A(["button-item",{active:c.value===1}])},[s("div",ks,"B"+e(g)+e(D["i_"+g]),1),s("div",ws,e(c.value.toFixed(2)),1),s("div",{class:"button-progress",style:h({width:c.value*100+"%"})},null,4)],2))),128))])])]),s("div",Ts,[s("div",js,[t[7]||(t[7]=s("i",{class:"bi bi-reception-4"},null,-1)),m(" "+e(d(o)("pages.gamepadTest.joystickValues")),1)]),s("div",As,[s("div",Ss,[(u(!0),r(v,null,_(i.axes.slice(0,4),(c,g)=>(u(),r("div",{key:g,class:"axis-item"},[s("div",Ds,"Axis "+e(g),1),s("div",Ls,[t[8]||(t[8]=s("div",{class:"axis-line"},null,-1)),t[9]||(t[9]=s("div",{class:"axis-center"},null,-1)),s("div",{class:"axis-active",style:h(C(c))},null,4)]),s("div",Cs,e(c.toFixed(12)),1)]))),128))]),s("div",Gs,[s("div",$s,[s("div",Bs,e(d(o)("pages.gamepadTest.leftStick")),1),s("div",Fs,[t[10]||(t[10]=s("div",{class:"joystick-guideline joystick-guideline-x"},null,-1)),t[11]||(t[11]=s("div",{class:"joystick-guideline joystick-guideline-y"},null,-1)),s("div",{class:"joystick-dot",style:h(G(n))},null,4)])]),s("div",Vs,[s("div",Es,e(d(o)("pages.gamepadTest.rightStick")),1),s("div",Ms,[t[12]||(t[12]=s("div",{class:"joystick-guideline joystick-guideline-x"},null,-1)),t[13]||(t[13]=s("div",{class:"joystick-guideline joystick-guideline-y"},null,-1)),s("div",{class:"joystick-dot",style:h($(n))},null,4)])])])]),s("div",Ns,[s("button",{class:"vibrate-btn",onClick:c=>B(n)},[t[14]||(t[14]=s("i",{class:"bi bi-phone-vibrate me-2"},null,-1)),m(" "+e(d(o)("pages.gamepadTest.vibrateTest")),1)],8,qs)])])])),[[I,y.value===n]])),128)),s("div",zs,[s("div",Ps,[t[15]||(t[15]=s("i",{class:"bi bi-info-circle"},null,-1)),m(" "+e(d(o)("pages.gamepadTest.notices")),1)]),s("div",Rs,[s("div",Is,[s("ul",null,[(u(!0),r(v,null,_(L.value,(i,n)=>(u(),r("li",{key:n},e(i),1))),128))])])])])])}}}),Hs=U(Us,[["__scopeId","data-v-ee60e1cf"]]);export{Hs as default};
